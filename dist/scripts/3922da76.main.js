function takeTurn(){var a=colors[Math.floor(Math.random()*colors.length)],b=bodyParts[Math.floor(Math.random()*bodyParts.length)],c=b+", "+a;$("#turns").append("<div>"+c+"</div>"),currentlyTalking=!0,speechSynthesis.speak(new SpeechSynthesisUtterance(c))}var currentlyTalking=!1,colors=["red","green","blue","yellow"],bodyParts=["left foot","right foot","left hand","right hand"],recognition=new webkitSpeechRecognition;recognition.lang="en-US",recognition.continuous=!0,recognition.interimResults=!0,recognition.onstart=function(){console.log("start",arguments)},recognition.onresult=function(a){if(console.log("result",a),currentlyTalking)currentlyTalking=!1;else if(a.results.length){var b=a.results[a.resultIndex];b.isFinal?(console.log("Speech result: "+b[0].transcript),b[0].transcript.match(/\bgo\b/g)&&takeTurn()):console.log("result not final")}else console.log("no results")},recognition.onerror=function(a){console.log("error",a)},recognition.onend=function(){console.log("done!"),speechSynthesis.speak(new SpeechSynthesisUtterance("Are you done? I think you're done."))},$(".start").on("click",function(){recognition.start(),console.log("starting!")}),$(".stop").on("click",function(){recognition.stop(),console.log("stopping!")});